(this["webpackJsonpgoit-react-hw-01-components"]=this["webpackJsonpgoit-react-hw-01-components"]||[]).push([[1],{114:function(e,t,n){},139:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n.n(r),a=n(33),i=n.n(a),u=n(24),s=n(34),o=n(91),l=(n(114),n(16)),j=n(13),d=n(30),b=n(189),h=n(188),p=n(192),f=n(194),O=n(193),x=n(191),g=n(185),v=n(184),m=n(181),y=n(2),w=function(){var e=c.a.useState(null),t=Object(j.a)(e,2),n=(t[0],t[1],Object(u.c)((function(e){return e.authReducer.isLoggedIn}))),r=Object(u.b)(),a=Object(u.c)((function(e){return e.authReducer.user.name})),i=Object(u.c)((function(e){return e.authReducer.user.email}));return Object(y.jsx)(b.a,{position:"static",children:Object(y.jsx)(x.a,{maxWidth:"xl",children:Object(y.jsxs)(p.a,{disableGutters:!0,children:[Object(y.jsxs)(h.a,{style:{alignItems:"center"},sx:{flexGrow:1,display:{xs:"flex",md:"none"}},children:[Object(y.jsx)(O.a,{variant:"h6",component:"div",sx:{flexGrow:1},children:Object(y.jsx)(s.b,{activeStyle:{color:"white"},style:{color:"#00CED1"},to:"/",exact:!0,children:"\u0413\u043b\u0430\u0432\u043d\u0430\u044f"})}),n?Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)(O.a,{variant:"h6",component:"div",sx:{flexGrow:1},children:Object(y.jsx)(s.b,{activeStyle:{color:"white"},style:{color:"#00CED1"},to:"/contacts",children:"Contacts"})}),Object(y.jsxs)("div",{style:{display:"flex"},children:[Object(y.jsx)(O.a,{variant:"h8",component:"div",sx:{flexGrow:1},children:Object(y.jsxs)("span",{children:["\u0414\u043e\u0431\u0440\u043e \u043f\u043e\u0436\u0430\u043b\u043e\u0432\u0430\u0442\u044c, ",a," ",i]})}),Object(y.jsx)(v.a,{style:{height:"100"},color:"error",size:"small",variant:"outlined",onClick:function(e){r(d.a.logOut())},children:"\u0412\u044b\u0439\u0442\u0438"})]})]}):Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)(O.a,{variant:"h6",component:"div",sx:{flexGrow:1},children:Object(y.jsx)(s.b,{activeStyle:{color:"white"},style:{color:"#00CED1"},to:"/register",exact:!0,children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"})}),Object(y.jsx)(O.a,{variant:"h6",component:"div",sx:{flexGrow:1},children:Object(y.jsx)(s.b,{activeStyle:{color:"white"},style:{color:"#00CED1"},to:"/login",exact:!0,children:"\u041b\u043e\u0433\u0438\u043d"})})]})]}),n&&Object(y.jsx)(h.a,{sx:{flexGrow:0},children:Object(y.jsx)(m.a,{children:Object(y.jsx)(f.a,{children:Object(y.jsx)(g.a,{alt:"Remy Sharp",src:"/static/images/avatar/2.jpg"})})})})]})})})},k=n(39),R=n(61),U=["children","redirectTo"];function C(e){var t=e.children,n=e.redirectTo,r=void 0===n?"/":n,c=Object(R.a)(e,U),a=Object(u.c)((function(e){return e.authReducer.isLoggedIn}));return console.log(a),Object(y.jsx)(l.b,Object(k.a)(Object(k.a)({},c),{},{children:a?t:Object(y.jsx)(l.a,{to:r})}))}var I=n(186),L=n(190),S=n(8),T=n(95),z=n(187),G=Object(S.a)(L.a)((function(e){var t=e.theme;return Object(k.a)(Object(k.a)({},t.typography.body2),{},{textAlign:"center",color:t.palette.text.secondary,height:1200,lineHeight:"60px"})})),F=Object(T.a)({palette:{mode:"light"}});function W(e){var t=e.children;return Object(y.jsx)(I.a,{container:!0,spacing:9,children:[F].map((function(e,n){return Object(y.jsx)(I.a,{item:!0,xs:6,children:Object(y.jsx)(z.a,{theme:e,children:Object(y.jsx)(h.a,{sx:{p:2,bgcolor:"background.default",display:"grid",gridTemplateColumns:{md:"1fr 1fr"},width:800,height:1200,gap:2},children:Object(y.jsx)(G,{children:t})})})},n)}))})}var E=["children","restricted","redirectTo"];function V(e){var t=e.children,n=e.restricted,r=void 0!==n&&n,c=e.redirectTo,a=void 0===c?"/":c,i=Object(R.a)(e,E),s=Object(u.c)((function(e){return e.authReducer.isLoggedIn}))&&r;return Object(y.jsx)(l.b,Object(k.a)(Object(k.a)({},i),{},{children:s?Object(y.jsx)(l.a,{to:a}):t}))}var A=n(183),D=Object(r.lazy)((function(){return Promise.all([n.e(0),n.e(4)]).then(n.bind(null,239))})),P=Object(r.lazy)((function(){return n.e(5).then(n.bind(null,235))})),B=Object(r.lazy)((function(){return Promise.all([n.e(0),n.e(7)]).then(n.bind(null,236))})),J=Object(r.lazy)((function(){return Promise.all([n.e(0),n.e(6)]).then(n.bind(null,237))}));function H(){var e=Object(u.b)(),t=Object(u.c)((function(e){return e.authReducer.isFetchingUser}));return console.log(t),Object(r.useEffect)((function(){e(d.a.fetchUser())}),[e]),Object(y.jsx)(W,{children:t?Object(y.jsxs)(h.a,{sx:{marginTop:200,marginLeft:"auto",marginRight:"auto",width:500},children:[Object(y.jsx)(A.a,{}),Object(y.jsx)(A.a,{animation:"wave"}),Object(y.jsx)(A.a,{animation:!1})]}):Object(y.jsxs)("div",{className:"container",children:[Object(y.jsx)(w,{}),Object(y.jsx)(l.d,{children:Object(y.jsxs)(r.Suspense,{fallback:Object(y.jsxs)(h.a,{sx:{marginTop:200,marginLeft:"auto",marginRight:"auto",width:500},children:[Object(y.jsx)(A.a,{}),Object(y.jsx)(A.a,{animation:"wave"}),Object(y.jsx)(A.a,{animation:!1})]}),children:[Object(y.jsx)(V,{exact:!0,path:"/",children:Object(y.jsx)(P,{})}),Object(y.jsx)(V,{path:"/register",restricted:!0,children:Object(y.jsx)(B,{})}),Object(y.jsx)(V,{path:"/login",redirectTo:"/contacts",restricted:!0,children:Object(y.jsx)(J,{})}),Object(y.jsx)(C,{path:"/contacts",redirectTo:"/login",children:Object(y.jsx)(D,{})})]})})]})})}var M,N,q,K=n(12),Q=n(17),X=n(40),Y=n(94),Z=n.n(Y),$=n(5),_=n(21),ee=n(89),te=n(37),ne=Object(Q.d)([],(M={},Object($.a)(M,te.c.fulfilled,(function(e,t){return t.payload})),Object($.a)(M,te.a.fulfilled,(function(e,t){return[].concat(Object(K.a)(e),[t.payload])})),Object($.a)(M,te.b.fulfilled,(function(e,t){return t.payload})),M)),re=Object(Q.d)(null,(N={},Object($.a)(N,te.c.rejected,(function(e,t){return t.payload})),Object($.a)(N,te.c.pending,(function(){return null})),Object($.a)(N,te.a.rejected,(function(e,t){return t.payload})),Object($.a)(N,te.a.pending,(function(){return null})),Object($.a)(N,te.b.pending,(function(){return null})),Object($.a)(N,te.b.rejected,(function(e,t){return t.payload})),N)),ce=Object(Q.d)("",Object($.a)({},ee.a,(function(e,t){return t.payload}))),ae=Object(_.b)({contacts:ne,error:re,filter:ce}),ie=Object(Q.e)({name:"auth",initialState:{user:{name:null,email:null},token:null,isLoggedIn:!1,isFetchingUser:!1},extraReducers:(q={},Object($.a)(q,d.a.register.fulfilled,(function(e,t){e.user=t.payload.user,e.token=t.payload.token,e.isLoggedIn=!0})),Object($.a)(q,d.a.logIn.fulfilled,(function(e,t){e.user=t.payload.user,e.token=t.payload.token,e.isLoggedIn=!0})),Object($.a)(q,d.a.logOut.fulfilled,(function(e,t){e.user={name:null,email:null},e.token=null,e.isLoggedIn=!1})),Object($.a)(q,d.a.fetchUser.pending,(function(e){e.isFetchingUser=!0})),Object($.a)(q,d.a.fetchUser.fulfilled,(function(e,t){e.user=t.payload,e.isLoggedIn=!0,e.isFetchingUser=!1})),Object($.a)(q,d.a.fetchUser.rejected,(function(e){e.isFetchingUser=!1})),q)}).reducer,ue=Object(K.a)(Object(Q.f)({serializableCheck:{ignoredActions:[X.a,X.f,X.b,X.c,X.d,X.e]}})),se={key:"auth",storage:Z.a,whitelist:["token"]},oe=Object(Q.a)({reducer:{authReducer:Object(X.g)(se,ie),contacts:ae},middleware:ue,devTools:!1}),le=Object(X.h)(oe);i.a.render(Object(y.jsx)(c.a.StrictMode,{children:Object(y.jsx)(u.a,{store:oe,children:Object(y.jsx)(o.a,{loading:null,persistor:le,children:Object(y.jsx)(s.a,{children:Object(y.jsx)(H,{})})})})}),document.getElementById("root"))},30:function(e,t,n){"use strict";var r=n(15),c=n.n(r),a=n(28),i=n(27),u=n.n(i),s=n(17);u.a.defaults.baseURL="https://connections-api.herokuapp.com";var o=function(e){u.a.defaults.headers.common.Authorization="Bearer ".concat(e)},l=function(){u.a.defaults.headers.common.Authorization=""},j=Object(s.c)("auth/register",function(){var e=Object(a.a)(c.a.mark((function e(t,n){var r,a,i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.rejectWithValue,e.prev=1,e.next=4,u.a.post("/users/signup",t);case 4:return a=e.sent,i=a.data,o(i.token),e.abrupt("return",i);case 10:return e.prev=10,e.t0=e.catch(1),e.abrupt("return",r(e.t0));case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t,n){return e.apply(this,arguments)}}()),d=Object(s.c)("auth/login",function(){var e=Object(a.a)(c.a.mark((function e(t,n){var r,a,i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.rejectWithValue,e.prev=1,e.next=4,u.a.post("/users/login",t);case 4:return a=e.sent,i=a.data,o(i.token),e.abrupt("return",i);case 10:return e.prev=10,e.t0=e.catch(1),e.abrupt("return",r(e.t0));case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t,n){return e.apply(this,arguments)}}()),b=Object(s.c)("auth/logout",function(){var e=Object(a.a)(c.a.mark((function e(t,n){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.a.post("/users/logout");case 3:l(),e.next=9;break;case 6:return e.prev=6,e.t0=e.catch(0),e.abrupt("return",n.rejectWithValue());case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,n){return e.apply(this,arguments)}}()),h=Object(s.c)("auth/refresh",function(){var e=Object(a.a)(c.a.mark((function e(t,n){var r,a,i,s;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.getState(),null!==(a=r.authReducer.token)){e.next=5;break}return console.log("\u0422\u043e\u043a\u0435\u043d\u0430 \u043d\u0435\u0442, \u0443\u0445\u043e\u0434\u0438\u043c \u0438\u0437 fetchCurrentUser"),e.abrupt("return",n.rejectWithValue());case 5:return o(a),e.prev=6,e.next=9,u.a.get("/users/current");case 9:return i=e.sent,s=i.data,e.abrupt("return",s);case 14:e.prev=14,e.t0=e.catch(6),n.rejectWithValue();case 17:case"end":return e.stop()}}),e,null,[[6,14]])})));return function(t,n){return e.apply(this,arguments)}}()),p={register:j,logOut:b,logIn:d,fetchUser:h};t.a=p},37:function(e,t,n){"use strict";n.d(t,"a",(function(){return p})),n.d(t,"c",(function(){return f})),n.d(t,"b",(function(){return O}));var r=n(15),c=n.n(r),a=n(28),i=n(27),u=n.n(i),s=n(17);function o(){return l.apply(this,arguments)}function l(){return(l=Object(a.a)(c.a.mark((function e(){var t,n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.a.get("/contacts");case 2:return t=e.sent,n=t.data,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function j(e){return d.apply(this,arguments)}function d(){return(d=Object(a.a)(c.a.mark((function e(t){var n,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.a.post("/contacts",t);case 2:return n=e.sent,r=n.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function b(e){return h.apply(this,arguments)}function h(){return(h=Object(a.a)(c.a.mark((function e(t){var n,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.a.delete("/contacts/".concat(t));case 2:return n=e.sent,r=n.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}u.a.defaults.baseURL="https://connections-api.herokuapp.com";var p=Object(s.c)("contacts/addContact",function(){var e=Object(a.a)(c.a.mark((function e(t,n){var r,a,i,u,s;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.name,a=t.number,i=n.rejectWithValue,u={name:r,number:a},e.prev=3,e.next=6,j(u);case 6:return s=e.sent,e.abrupt("return",s);case 10:return e.prev=10,e.t0=e.catch(3),e.abrupt("return",i(e.t0));case 13:case"end":return e.stop()}}),e,null,[[3,10]])})));return function(t,n){return e.apply(this,arguments)}}()),f=Object(s.c)("contacts/fetchContacts",Object(a.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o();case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})))),O=Object(s.c)("contacts/deleteContact",function(){var e=Object(a.a)(c.a.mark((function e(t){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b(t);case 2:return e.sent,e.next=5,o();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},89:function(e,t,n){"use strict";var r=n(17),c=Object(r.b)("contacts/filter");t.a=c}},[[139,2,3]]]);
//# sourceMappingURL=main.0da62952.chunk.js.map